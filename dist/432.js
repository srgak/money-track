"use strict";(self.webpackChunknovella=self.webpackChunknovella||[]).push([[432],{9432:(G,m,r)=>{r.r(m),r.d(m,{PageFieldModule:()=>D});var h=r(9808),p=r(859),i=r(2382),I=r(1135),t=r(4893),g=r(727);class w extends g.w0{constructor(n,e){super()}schedule(n,e=0){return this}}const d={setInterval(...o){const{delegate:n}=d;return((null==n?void 0:n.setInterval)||setInterval)(...o)},clearInterval(o){const{delegate:n}=d;return((null==n?void 0:n.clearInterval)||clearInterval)(o)},delegate:void 0};var A=r(8737),N=r(6063);class a{constructor(n,e=a.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,s){return new this.schedulerActionCtor(this,n).schedule(s,e)}}a.now=N.l.now;const T=new class extends a{constructor(n,e=a.now){super(n,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let s;this._active=!0;do{if(s=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,s){for(;n=e.shift();)n.unsubscribe();throw s}}}(class extends w{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){if(this.closed)return this;this.state=n;const s=this.id,l=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(l,s,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(l,this.id,e),this}requestAsyncId(n,e,s=0){return d.setInterval(n.flush.bind(n,this),s)}recycleAsyncId(n,e,s=0){if(null!=s&&this.delay===s&&!1===this.pending)return e;d.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(n,e);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let l,s=!1;try{this.work(n)}catch(u){s=!0,l=u||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),l}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:s}=e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,A.P)(s,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}});var b=r(4482),P=r(5403);function v(o,n=T){return(0,b.e)((e,s)=>{let l=null,u=null,y=null;const F=()=>{if(l){l.unsubscribe(),l=null;const c=u;u=null,s.next(c)}};function q(){const c=y+o,C=n.now();if(C<c)return l=this.schedule(void 0,c-C),void s.add(l);F()}e.subscribe(new P.Q(s,c=>{u=c,y=n.now(),l||(l=n.schedule(q,o),s.add(l))},()=>{F(),s.complete()},void 0,()=>{u=l=null}))})}var f=r(1435);function J(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"label",3),t._uU(2,"\u0424\u0418\u041e"),t.qZA(),t.TgZ(3,"input",4),t.NdJ("blur",function(){return t.CHM(e),t.oxw().onBlurFio()}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("formControl",e.fioControl)}}function B(o,n){1&o&&t._uU(0," \u0417\u0430\u043f\u043e\u043b\u043d\u0438 \u043f\u043e\u043b\u0435 ")}function E(o,n){1&o&&(t.TgZ(0,"div",5),t.TgZ(1,"label",3),t._uU(2,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f: "),t.qZA(),t._UZ(3,"input",6),t.TgZ(4,"val-errors",7),t.YNc(5,B,1,0,"ng-template",8),t.qZA(),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"label",3),t._uU(8,"\u0418\u043c\u044f: "),t.qZA(),t._UZ(9,"input",9),t.qZA(),t.TgZ(10,"div",5),t.TgZ(11,"label",3),t._uU(12,"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e: "),t.qZA(),t._UZ(13,"input",10),t.qZA())}let M=(()=>{class o{constructor(){this.fioControl=new i.NI(null),this.form=new i.cw({firstName:new i.NI(null,[i.kI.required]),lastName:new i.NI(null,[i.kI.required]),patronomic:new i.NI(null,[i.kI.required])}),this.isAloneField=!0,this.subs=new g.w0,this.onTouched=()=>{},this.onChange=e=>{}}writeValue(e){const s=`${(null==e?void 0:e.lastName)||""} ${(null==e?void 0:e.firstName)||""} ${(null==e?void 0:e.patronomic)||""}`.trim();this.fioControl.setValue(s,{onlySelf:!0,emitEvent:!1})}registerOnChange(e){this.subs.add(this.form.valueChanges.subscribe(e))}registerOnTouched(e){this.onTouched=e}setDisabledState(e){}onBlurFio(){this.fioControl.value.split(" ").length<3&&(this.isAloneField=!1)}ngOnInit(){var e;this.subs.add(this.fioControl.valueChanges.pipe(v(500)).subscribe(s=>{const l=s.split(" ").filter(u=>!!u);l.length>=3?console.log("\u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"):l.length>=2?console.log("\u0438\u043c\u044f"):console.log("\u0444\u0430\u043c\u0438\u043b\u0438\u044f"),this.form.patchValue({firstName:l[1],lastName:l[0],patronomic:l.splice(2,l.length).join(" ")})})),this.subs.add(null===(e=this.form.get("lastName"))||void 0===e?void 0:e.valueChanges.pipe(v(500)).subscribe(console.log))}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-fio"]],features:[t._Bn([{provide:i.JU,useExisting:(0,t.Gpc)(()=>o),multi:!0}])],decls:4,vars:3,consts:[[4,"ngIf","ngIfElse"],[3,"formGroup"],["manyFields",""],["for",""],["type","text",3,"formControl","blur"],[1,"col-12"],["type","text","formControlName","lastName"],["controlName","lastName"],["valError","required"],["type","text","formControlName","firstName"],["type","text","formControlName","patronomic"]],template:function(e,s){if(1&e&&(t.ynx(0),t.YNc(1,J,4,1,"ng-container",0),t.YNc(2,E,14,0,"ng-template",1,2,t.W1O),t.BQk()),2&e){const l=t.MAs(3);t.xp6(1),t.Q6J("ngIf",s.isAloneField)("ngIfElse",l),t.xp6(1),t.Q6J("formGroup",s.form)}},directives:[h.O5,i.JL,i.sg,i.Fj,i.JJ,i.oH,i.u,f.tM,f.HY],styles:[""],changeDetection:0}),o})();const S=[{path:"",component:(()=>{class o{constructor(){this.percent=new I.X(0),this.form=new i.cw({control1:new i.NI(null,[i.kI.required]),control2:new i.NI(null,[i.kI.required]),fio:new i.NI(null)})}setPercent(e){this.percent.next(e)}onDisable(){var e,s,l;(null===(e=this.form.get("control2"))||void 0===e?void 0:e.enabled)?null===(s=this.form.get("control2"))||void 0===s||s.disable():null===(l=this.form.get("control2"))||void 0===l||l.enable()}ngOnInit(){var e;null===(e=this.form.get("fio"))||void 0===e||e.valueChanges.subscribe(console.log)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-page-field"]],decls:2,vars:1,consts:[[1,"container",3,"formGroup"],["formControlName","fio"]],template:function(e,s){1&e&&(t.TgZ(0,"form",0),t._UZ(1,"app-fio",1),t.qZA()),2&e&&t.Q6J("formGroup",s.form)},directives:[i._Y,i.JL,i.sg,M,i.JJ,i.u],styles:[""],changeDetection:0}),o})()}];let U=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.Bz.forChild(S)],p.Bz]}),o})();var Q=r(9822);let O=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[h.ez,i.u5,i.UX,f.bQ]]}),o})(),D=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[h.ez,U,Q.n,O]]}),o})()}}]);